/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package testgui;

import java.io.File;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ListView;
import javafx.scene.control.TextArea;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.paint.ImagePattern;
import javafx.scene.text.Text;
import javafx.scene.text.TextFlow;


/**
 *
 * @author Mathieu
 */
public class MenuSolo implements Panel{

    private Scene scene;
    
    
    public MenuSolo(DistributeurPanel dp){
        Group group=new Group();
        String source="file:///"+System.getProperty("user.dir")+"\\media\\images\\";//sable.jpg";
        source=source.replace('\\', '/');
        scene=new Scene(group,800,600, new ImagePattern(new Image(source+"fondP2.png")));
        
        HBox hb=new HBox();
        hb.setSpacing(100);
        hb.setMinWidth(scene.getWidth());
        hb.setMinHeight(160);
        hb.setAlignment(Pos.CENTER);
        Label creer=new Label("Créer Partie");
        creer.setStyle("-fx-background-color: rgb(235,165,68);"
                + "-fx-border-top: 20px solid ;"
                + "-fx-border-left: 20px solid ;"
                + "-fx-border-right: 20px solid ;"
                + "-fx-border-bottom: 20px solid ;"
                + "-fx-padding: 20px 30px 20px 30px");
        Label charger=new Label("Charger Partie");
        hb.getChildren().add(creer);
        hb.getChildren().add(charger);
        
        
        Label test0=new Label("Je suis présent");
        ObservableList<String> oal= FXCollections.observableArrayList();
        ListView<String> lv=new ListView<String>();
        File repertoire=new File(System.getProperty("user.dir")+"\\media\\plateau");
        if(repertoire.listFiles().length==0){
                oal.add("Aucune partie enregistrée");
        }else{
            for(File f : repertoire.listFiles()){
                oal.add(f.getName());
            }
        }
        lv.setItems(oal);
        lv.setOnMouseClicked(new EventHandler<MouseEvent>(){
            @Override
            public void handle(MouseEvent event) {
                System.out.println(lv.getSelectionModel().getSelectedItem());
            }
               
        });
        lv.setMaxWidth(500);
        lv.setStyle("-fx-background-image: url(\"media/images/fondP1.png\");");
        
        
        Label start=new Label("Lancer Partie");
        start.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                PlateauGraphique pg=new PlateauGraphique(lv.getSelectionModel().getSelectedItem());
                dp.nouveauJeu(pg, "Solo");
                dp.changePanel("jeu");
            }
        });
        
        
        
        GridPane creerOption=new GridPane();
        creerOption.add(test0,0,0);
        creerOption.setVisible(true);
        creerOption.setMinWidth(800);
        creerOption.setMinHeight(440);
        creerOption.setTranslateX(0);
        creerOption.setTranslateY(160);
        creerOption.setAlignment(Pos.CENTER);
        creerOption.setStyle("");
        
        GridPane chargerOption=new GridPane();
        chargerOption.add(lv,0,0);
        chargerOption.add(start,0,1);
        chargerOption.setVisible(false);
        chargerOption.setMinWidth(800);
        chargerOption.setMinHeight(440);
        chargerOption.setTranslateX(0);
        chargerOption.setTranslateY(160);
        chargerOption.setAlignment(Pos.CENTER);
        
        
        
        
        
        group.getChildren().add(creerOption);
        group.getChildren().add(chargerOption);
        group.getChildren().add(hb);
        
        creer.setOnMouseClicked(new EventHandler<MouseEvent>(){
            @Override
            public void handle(MouseEvent event) {
                chargerOption.setVisible(false);
                creerOption.setVisible(true);
                System.out.println("Options pour creer une partie");
            }
        
        
        });
        
        charger.setOnMouseClicked(new EventHandler<MouseEvent>(){
            @Override
            public void handle(MouseEvent event) {
                creerOption.setVisible(false);
                chargerOption.setVisible(true);
            }
        
        
        });
        
        
    }
    
    
    @Override
    public Scene getScene() {
        return scene;
    }
    
}
